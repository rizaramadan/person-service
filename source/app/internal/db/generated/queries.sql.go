// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: queries.sql

package db

import (
	"context"
)

const deleteValue = `-- name: DeleteValue :exec
DELETE FROM key_value WHERE key = $1
`

// Delete a value by key
func (q *Queries) DeleteValue(ctx context.Context, key string) error {
	_, err := q.exec(ctx, q.deleteValueStmt, deleteValue, key)
	return err
}

const getKeyValue = `-- name: GetKeyValue :one
SELECT key, value, created_at, updated_at FROM key_value WHERE key = $1 LIMIT 1
`

// Retrieve the full key-value record by key
func (q *Queries) GetKeyValue(ctx context.Context, key string) (KeyValue, error) {
	row := q.queryRow(ctx, q.getKeyValueStmt, getKeyValue, key)
	var i KeyValue
	err := row.Scan(
		&i.Key,
		&i.Value,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getValue = `-- name: GetValue :one
SELECT value FROM key_value WHERE key = $1 LIMIT 1
`

// Retrieve a value by key
func (q *Queries) GetValue(ctx context.Context, key string) (string, error) {
	row := q.queryRow(ctx, q.getValueStmt, getValue, key)
	var value string
	err := row.Scan(&value)
	return value, err
}

const healthCheck = `-- name: HealthCheck :exec
SELECT 1
`

// Perform a simple health check query
func (q *Queries) HealthCheck(ctx context.Context) error {
	_, err := q.exec(ctx, q.healthCheckStmt, healthCheck)
	return err
}

const setValue = `-- name: SetValue :exec
INSERT INTO key_value (key, value) VALUES ($1, $2)
ON CONFLICT (key) DO UPDATE SET value = $2
`

type SetValueParams struct {
	Key   string
	Value string
}

// Set a value by key
func (q *Queries) SetValue(ctx context.Context, arg SetValueParams) error {
	_, err := q.exec(ctx, q.setValueStmt, setValue, arg.Key, arg.Value)
	return err
}
